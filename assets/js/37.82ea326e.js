(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{503:function(s,e,a){"use strict";a.r(e);var r=a(2),t=Object(r.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"一、找到一个合适的docker的redis的版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、找到一个合适的docker的redis的版本"}},[s._v("#")]),s._v(" 一、找到一个合适的docker的redis的版本")]),s._v(" "),e("p",[s._v("可以去"),e("a",{attrs:{href:"https://hub.docker.com/_/redis?tab=tags",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker hub"),e("OutboundLink")],1),s._v("中去找一下")]),s._v(" "),e("h2",{attrs:{id:"二、使用docker安装redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、使用docker安装redis"}},[s._v("#")]),s._v(" 二、使用docker安装redis")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装好之后使用"),e("code",[s._v("docker images")]),s._v("即可查看")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"三、准备redis的配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、准备redis的配置文件"}},[s._v("#")]),s._v(" 三、准备redis的配置文件")]),s._v(" "),e("p",[s._v("因为需要redis的配置文件"),e("code",[s._v("redis.conf")]),s._v("，这里最好还是去redis的[官方下载][http://download.redis.io/redis-stable/redis.conf]一个redis使用里面的配置文件即可")]),s._v(" "),e("p",[s._v("或者在linux敲")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://raw.githubusercontent.com/antirez/redis/4.0/redis.conf -O conf/redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"四、配置redis-conf配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、配置redis-conf配置文件"}},[s._v("#")]),s._v(" 四、配置redis.conf配置文件")]),s._v(" "),e("p",[e("strong",[s._v("修改"),e("code",[s._v("redis.conf")]),s._v("配置文件：")])]),s._v(" "),e("p",[s._v("主要配置的如下：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉这部分，使redis可以外部访问")]),s._v("\ndaemonize no"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用守护线程的方式启动")]),s._v("\nrequirepass 你的密码"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给redis设置密码")]),s._v("\nappendonly "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#redis持久化　　默认是no")]),s._v("\ntcp-keepalive "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#防止出现远程主机强迫关闭了一个现有的连接的错误 默认是300")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"五、创建本地与docker映射的目录-即本地存放的位置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、创建本地与docker映射的目录-即本地存放的位置"}},[s._v("#")]),s._v(" 五、创建本地与docker映射的目录，即本地存放的位置")]),s._v(" "),e("p",[s._v("创建本地存放redis的位置：")]),s._v(" "),e("p",[s._v("可以自定义，因为我的docker的一些配置文件都是存放在"),e("code",[s._v("/data")]),s._v("目录下面的，所以我依然在"),e("code",[s._v("/data")]),s._v("目录下创建一个"),e("code",[s._v("redis")]),s._v("目录，这样是为了方便后期管理")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /home/redis\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /home/redis/data\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("把"),e("code",[s._v("配置文件")]),s._v("拷贝到刚才创建好的"),e("code",[s._v("/home/redis")]),s._v("里")]),s._v(" "),e("h2",{attrs:{id:"六、启动docker-redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、启动docker-redis"}},[s._v("#")]),s._v(" 六、启动docker redis")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always  -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 --name redis -v /home/redis/redis.conf:/etc/redis/redis.conf  -v /home/redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("参数解释：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("--restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always：开机启动容器,容器异常自动重启\n-p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379:把容器内的6379端口映射到宿主机6379端口\n-v /home/redis/redis.conf:/etc/redis/redis.conf：把宿主机配置好的redis.conf放到容器内的这个位置中\n-v /home/redis/data:/data：把redis持久化的数据在宿主机内显示，做数据备份\nredis-server /etc/redis/redis.conf：这个是关键配置，让redis不是无配置启动，而是按照这个redis.conf的配置启动\n–appendonly yes：redis启动后数据持久化\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"七、查看是否启动成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、查看是否启动成功"}},[s._v("#")]),s._v(" 七、查看是否启动成功")]),s._v(" "),e("p",[s._v("是否成功启动：如果有redis就代表成功了")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看日志：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);